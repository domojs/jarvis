var debug=require('debug')('web');

exports.init=function(config, app)
{
	$.each(config, function(index, item){
		$.language($.extend(item, {
			process:function(cmd, context, callback, next)
			{
				var url=item.url || item.ajax.url;
				url=url.replace(/\{([^}]+)\}/g, function(match, name){
					return cmd[name];
				});
				debug(url);
				$.ajax({url:url, success:function(){
					callback(null, 'requete envoy√©e '+url);
				}, error:function(error){
					callback(error);
				}});
			}
		}));
	});
};



